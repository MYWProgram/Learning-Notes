# z-index 失效的问题

## 元素设置属性 position: fixed

- 问题描述：假设左侧的菜单固定为 `fixed` 时，菜单中的内容无法设置有效的 `z-index`，导致菜单隐藏在页面元素之下；明明页面元素的 `z-index` 是 1，但是无论把菜单的 `z-index` 设置为多大，都不管用。
- 原因阐述：谷歌浏览器在设置 `position: fixed;` 后会触发元素创建一个新的层叠上下文，并且当成一个整体在父层叠上下文中进行比较。如上面描述的 `dom` 结构，当给 b 设置了 `position: fixed;` 属性后，会触发创建一个新的层叠上下文，它的父层叠上下文变成了 a，所以 b 只能在 a 的内部进行层叠比较。这也就是大家经常说的 `从父原则`。所以本来所有元素都在 `root` 内比较，改为 `fixed` 之后只能在父级元素内比较，而父级元素没有设置 `z-index`，所以无法比较。
- 解决方案：给父级元素设置 `z-index`，一般设置为 0 就可以了。
- 拓展：
  1. `z-index` 只有在设置了 `position` 为 `relative、absolute、fixed` 时才会有效。
  2. `z-index` 的 `从父原则`。当你发现把 `z-index` 设的多大都没用时，看看其父元素是否设置了有效的 `z-index`，当然别忘了先看看自身是否设置了`position`。
